
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>heapq_py &#8212; Justin Napolitano</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="shortcut icon" href="../_static/FAVICON.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
     
<link
  rel="alternate"
  type="application/atom+xml"
  href="../parts/journal/posts/atom.xml"
  title="Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   journal.jnapolitano.io
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Articles
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/articles/project-evolution-of-ngos/index.html">
   The World Trade Organization, Governments, and International Trade
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/articles/project-supcourt-masterpiececake/index.html">
   Voting Behavior, Textual Analysis, and the Spirit of the Law
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/articles/project-kurdish-conflict/index.html">
   Terrorism and Conflict Anatolia
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/articles/project-human-rights-law/index.html">
   International Human Rights Law Framework
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/brew/index.html">
   Brew
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/brew/docs/brew_install.html">
     Brew Install
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/development-tools/index.html">
   Development Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/development-tools/docs/00-install.html">
     Development Tools Installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/gh/index.html">
   GH CLI
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/gh/docs/gh_install.html">
     Gh CLi Install
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/go/index.html">
   Go
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/go/docs/installation.html">
     Go installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/jupyter/index.html">
   Jupyter
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/jupyter/docs/config-jupyter.html">
     Configuring Jupyter For Data Science
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/latex/index.html">
   Latex
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/latex/docs/00-tex-live-install.html">
     Installing Tex Live
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/perl/index.html">
   Perl
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/perl/docs/00-perl-install.html">
     Perl Installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/python/index.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/python/docs/0_python_install.html">
     Python Install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/python/docs/1_virtualenv_install.html">
     virtualenv Install
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/rust/index.html">
   Rust
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/rust/docs/rust-install.html">
     Rust Installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/shells/index.html">
   Shell Configuration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/shells/docs/1-fish-installation.html">
     Fish Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/shells/docs/2-ohmyfishinstall.html">
     Oh My Fish Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/shells/docs/3-starship-config.html">
     Starship Config Options
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/shells/docs/4-starship-install.html">
     Starship Installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/sphinx/index.html">
   Sphinx
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/sphinx/docs/build-this-site.html">
     Build this Website
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/tutorials/spotify-cli/index.html">
   Spotify
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../parts/tutorials/spotify-cli/docs/shpotify.html">
     Schpotify Install and config
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Posts
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/journal/posts.html">
   Posts
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/reference/algorithms/index.html">
   Algorithms
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../parts/reference/algorithms/python/index.html">
     Python Algorithms
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
    <label for="toctree-checkbox-14">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/binary-search-iterative.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         binary_search_iterative
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/binary-search-k.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         binary_searchK
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/binary-search-recursive.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         binary_search_recursive
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/escape-maze.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         escapeMaze
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/insertionSort.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         insertionSort
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/listsum.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         listsum
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/mergeSort.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         mergeSort
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/min-coin-cache.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         min_coin_cache
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/min-coin-tree.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         min_coin_tree
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/ordered-sequential-search.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         ordered_sequential_search
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/palchecker.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         palchecker
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/prims-algorithm.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         prims_algorithm
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/quick-sort.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quick_sort
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/quick_er_sort.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quicksort
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/selection_sort.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         selection_sort
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/sequential_search.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sequential_search.
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/shell-sort.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         shell_sort
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/short-bubble.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         short_bubble
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/towerofhanoi.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         TowerOfHanoi
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/tree_in_order.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         tree_in_order
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/tree_post-order.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         tree_post_order
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/tree_pre_order.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         tree_pre_order
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/triangle.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sierpinski_triangle
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/algorithms/python/docs/unordered_list.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         unordered_list
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/reference/automation-scripts/index.html">
   Automation Scripts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/index.html">
     Sphinx Scripts
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/acp.html">
       acp.sh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/chtml.html">
       chtml.sh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/deployz.html">
       Deployz.sh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/doit.html">
       doit.sh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/label_list.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         label_list
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/pullit.html">
       Pullit.sh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/automation-scripts/sphinx/docs/pushit.html">
       Pushit.sh
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../parts/reference/data-structures/index.html">
   Data Stuctures
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../parts/reference/data-structures/python/index.html">
     Python Data Structures
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/avl_tre.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         avl_tree
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/binary-tri.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         binary_tree
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/build-parse-tree.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         build_parse_tree
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/build-tree.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         build_tree
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/circular-list.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         cirular_list_push
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/dequeue.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         dequeue
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/heap.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         heapq_py
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/node.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         node
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/ordered_list.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         ordered_list
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/prims_heap.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         prims_algorithm_heap
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/queue.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         queue
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/single_list.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         single_list_push
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/single_to_circular.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         single_to_circular
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/stack.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         py_stack
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../parts/reference/data-structures/python/docs/stack%20copy.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         stack
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contact
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/contact/index.html">
   Contact Justin Napolitano
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tables and Indices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../parts/bibliography/bibliography.html">
   Bibliography
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../genindex.html">
   Index
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../py-modindex.html">
   Python Module Index
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/justin-napolitano/cv"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                 <h1>Source code for heapq_py</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Heap queue algorithm (a.k.a. priority queue).</span>
<span class="sd">Heaps are arrays for which a[k] &lt;= a[2*k+1] and a[k] &lt;= a[2*k+2] for</span>
<span class="sd">all k, counting elements from 0.  For the sake of comparison,</span>
<span class="sd">non-existing elements are considered to be infinite.  The interesting</span>
<span class="sd">property of a heap is that a[0] is always its smallest element.</span>
<span class="sd">Usage:</span>
<span class="sd">heap = []            # creates an empty heap</span>
<span class="sd">heappush(heap, item) # pushes a new item on the heap</span>
<span class="sd">item = heappop(heap) # pops the smallest item from the heap</span>
<span class="sd">item = heap[0]       # smallest item on the heap without popping it</span>
<span class="sd">heapify(x)           # transforms list into a heap, in-place, in linear time</span>
<span class="sd">item = heapreplace(heap, item) # pops and returns smallest item, and adds new item; the heap size is unchanged</span>
<span class="sd">Our API differs from textbook heap algorithms as follows:</span>
<span class="sd">-We use 0-based indexing.  This makes the relationship between the</span>
<span class="sd">index for a node and the indexes for its children slightly less</span>
<span class="sd">obvious, but is more suitable since Python uses 0-based indexing.</span>
<span class="sd">Our heappop() method returns the smallest item, not the largest.</span>
<span class="sd">These two make it possible to view the heap as a regular Python list</span>
<span class="sd">without surprises: heap[0] is the smallest item, and heap.sort()</span>
<span class="sd">maintains the heap invariant!</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Original code by Kevin O&#39;Connor, augmented by Tim Peters and Raymond Hettinger</span>

<span class="n">__about__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Heap queues</span>
<span class="s2">[explanation by François Pinard]</span>
<span class="s2">Heaps are arrays for which a[k] &lt;= a[2*k+1] and a[k] &lt;= a[2*k+2] for</span>
<span class="s2">all k, counting elements from 0.  For the sake of comparison,</span>
<span class="s2">non-existing elements are considered to be infinite.  The interesting</span>
<span class="s2">property of a heap is that a[0] is always its smallest element.</span>
<span class="s2">The strange invariant above is meant to be an efficient memory</span>
<span class="s2">representation for a tournament.  The numbers below are `k&#39;, not a[k]:</span>
<span class="s2">                                   0</span>
<span class="s2">                  1                                 2</span>
<span class="s2">          3               4                5               6</span>
<span class="s2">      7       8       9       10      11      12      13      14</span>
<span class="s2">    15 16   17 18   19 20   21 22   23 24   25 26   27 28   29 30</span>
<span class="s2">In the tree above, each cell `k&#39; is topping `2*k+1&#39; and `2*k+2&#39;.  In</span>
<span class="s2">a usual binary tournament we see in sports, each cell is the winner</span>
<span class="s2">over the two cells it tops, and we can trace the winner down the tree</span>
<span class="s2">to see all opponents s/he had.  However, in many computer applications</span>
<span class="s2">of such tournaments, we do not need to trace the history of a winner.</span>
<span class="s2">To be more memory efficient, when a winner is promoted, we try to</span>
<span class="s2">replace it by something else at a lower level, and the rule becomes</span>
<span class="s2">that a cell and the two cells it tops contain three different items,</span>
<span class="s2">but the top cell &quot;wins&quot; over the two topped cells.</span>
<span class="s2">If this heap invariant is protected at all time, index 0 is clearly</span>
<span class="s2">the overall winner.  The simplest algorithmic way to remove it and</span>
<span class="s2">find the &quot;next&quot; winner is to move some loser (let&#39;s say cell 30 in the</span>
<span class="s2">diagram above) into the 0 position, and then percolate this new 0 down</span>
<span class="s2">the tree, exchanging values, until the invariant is re-established.</span>
<span class="s2">This is clearly logarithmic on the total number of items in the tree.</span>
<span class="s2">By iterating over all items, you get an O(n ln n) sort.</span>
<span class="s2">A nice feature of this sort is that you can efficiently insert new</span>
<span class="s2">items while the sort is going on, provided that the inserted items are</span>
<span class="s2">not &quot;better&quot; than the last 0&#39;th element you extracted.  This is</span>
<span class="s2">especially useful in simulation contexts, where the tree holds all</span>
<span class="s2">incoming events, and the &quot;win&quot; condition means the smallest scheduled</span>
<span class="s2">time.  When an event schedule other events for execution, they are</span>
<span class="s2">scheduled into the future, so they can easily go into the heap.  So, a</span>
<span class="s2">heap is a good structure for implementing schedulers (this is what I</span>
<span class="s2">used for my MIDI sequencer :-).</span>
<span class="s2">Various structures for implementing schedulers have been extensively</span>
<span class="s2">studied, and heaps are good for this, as they are reasonably speedy,</span>
<span class="s2">the speed is almost constant, and the worst case is not much different</span>
<span class="s2">than the average case.  However, there are other representations which</span>
<span class="s2">are more efficient overall, yet the worst cases might be terrible.</span>
<span class="s2">Heaps are also very useful in big disk sorts.  You most probably all</span>
<span class="s2">know that a big sort implies producing &quot;runs&quot; (which are pre-sorted</span>
<span class="s2">sequences, which size is usually related to the amount of CPU memory),</span>
<span class="s2">followed by a merging passes for these runs, which merging is often</span>
<span class="s2">very cleverly organised[1].  It is very important that the initial</span>
<span class="s2">sort produces the longest runs possible.  Tournaments are a good way</span>
<span class="s2">to that.  If, using all the memory available to hold a tournament, you</span>
<span class="s2">replace and percolate items that happen to fit the current run, you&#39;ll</span>
<span class="s2">produce runs which are twice the size of the memory for random input,</span>
<span class="s2">and much better for input fuzzily ordered.</span>
<span class="s2">Moreover, if you output the 0&#39;th item on disk and get an input which</span>
<span class="s2">may not fit in the current tournament (because the value &quot;wins&quot; over</span>
<span class="s2">the last output value), it cannot fit in the heap, so the size of the</span>
<span class="s2">heap decreases.  The freed memory could be cleverly reused immediately</span>
<span class="s2">for progressively building a second heap, which grows at exactly the</span>
<span class="s2">same rate the first heap is melting.  When the first heap completely</span>
<span class="s2">vanishes, you switch heaps and start a new run.  Clever and quite</span>
<span class="s2">effective!</span>
<span class="s2">In a word, heaps are useful memory structures to know.  I use them in</span>
<span class="s2">a few applications, and I think it is good to keep a `heap&#39; module</span>
<span class="s2">around. :-)</span>
<span class="s2">--------------------</span>
<span class="s2">[1] The disk balancing algorithms which are current, nowadays, are</span>
<span class="s2">more annoying than clever, and this is a consequence of the seeking</span>
<span class="s2">capabilities of the disks.  On devices which cannot seek, like big</span>
<span class="s2">tape drives, the story was quite different, and one had to be very</span>
<span class="s2">clever to ensure (far in advance) that each tape movement will be the</span>
<span class="s2">most effective possible (that is, will best participate at</span>
<span class="s2">&quot;progressing&quot; the merge).  Some tapes were even able to read</span>
<span class="s2">backwards, and this was also used to avoid the rewinding time.</span>
<span class="s2">Believe me, real good tape sorts were quite spectacular to watch!</span>
<span class="s2">From all times, sorting has always been a Great Art! :-)</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;heappush&#39;</span><span class="p">,</span> <span class="s1">&#39;heappop&#39;</span><span class="p">,</span> <span class="s1">&#39;heapify&#39;</span><span class="p">,</span> <span class="s1">&#39;heapreplace&#39;</span><span class="p">,</span> <span class="s1">&#39;merge&#39;</span><span class="p">,</span>
           <span class="s1">&#39;nlargest&#39;</span><span class="p">,</span> <span class="s1">&#39;nsmallest&#39;</span><span class="p">,</span> <span class="s1">&#39;heappushpop&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="heappush"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.heappush">[docs]</a><span class="k">def</span> <span class="nf">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Push item onto heap, maintaining the heap invariant.&quot;&quot;&quot;</span>
    <span class="n">heap</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="n">_siftdown</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="heappop"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.heappop">[docs]</a><span class="k">def</span> <span class="nf">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pop the smallest item off the heap, maintaining the heap invariant.&quot;&quot;&quot;</span>
    <span class="n">lastelt</span> <span class="o">=</span> <span class="n">heap</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>    <span class="c1"># raises appropriate IndexError if heap is empty</span>
    <span class="k">if</span> <span class="n">heap</span><span class="p">:</span>
        <span class="n">returnitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">lastelt</span>
        <span class="n">_siftup</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">returnitem</span>
    <span class="k">return</span> <span class="n">lastelt</span></div>

<div class="viewcode-block" id="heapreplace"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.heapreplace">[docs]</a><span class="k">def</span> <span class="nf">heapreplace</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pop and return the current smallest value, and add the new item.</span>
<span class="sd">    This is more efficient than heappop() followed by heappush(), and can be</span>
<span class="sd">    more appropriate when using a fixed-size heap.  Note that the value</span>
<span class="sd">    returned may be larger than item!  That constrains reasonable uses of</span>
<span class="sd">    this routine unless written as part of a conditional replacement:</span>
<span class="sd">        if item &gt; heap[0]:</span>
<span class="sd">            item = heapreplace(heap, item)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">returnitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    <span class="c1"># raises appropriate IndexError if heap is empty</span>
    <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
    <span class="n">_siftup</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">returnitem</span></div>

<div class="viewcode-block" id="heappushpop"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.heappushpop">[docs]</a><span class="k">def</span> <span class="nf">heappushpop</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fast version of a heappush followed by a heappop.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">heap</span> <span class="ow">and</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">item</span><span class="p">:</span>
        <span class="n">item</span><span class="p">,</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span>
        <span class="n">_siftup</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="heapify"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.heapify">[docs]</a><span class="k">def</span> <span class="nf">heapify</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transform list into a heap, in-place, in O(len(x)) time.&quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># Transform bottom-up.  The largest index there&#39;s any point to looking at</span>
    <span class="c1"># is the largest with a child index in-range, so must have 2*i + 1 &lt; n,</span>
    <span class="c1"># or i &lt; (n-1)/2.  If n is even = 2*j, this is (2*j-1)/2 = j-1/2 so</span>
    <span class="c1"># j-1 is the largest, which is n//2 - 1.  If n is odd = 2*j+1, this is</span>
    <span class="c1"># (2*j+1-1)/2 = j so j-1 is the largest, and that&#39;s again n//2-1.</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">)):</span>
        <span class="n">_siftup</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span></div>

<span class="k">def</span> <span class="nf">_heappop_max</span><span class="p">(</span><span class="n">heap</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Maxheap version of a heappop.&quot;&quot;&quot;</span>
    <span class="n">lastelt</span> <span class="o">=</span> <span class="n">heap</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>    <span class="c1"># raises appropriate IndexError if heap is empty</span>
    <span class="k">if</span> <span class="n">heap</span><span class="p">:</span>
        <span class="n">returnitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">lastelt</span>
        <span class="n">_siftup_max</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">returnitem</span>
    <span class="k">return</span> <span class="n">lastelt</span>

<span class="k">def</span> <span class="nf">_heapreplace_max</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Maxheap version of a heappop followed by a heappush.&quot;&quot;&quot;</span>
    <span class="n">returnitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    <span class="c1"># raises appropriate IndexError if heap is empty</span>
    <span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
    <span class="n">_siftup_max</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">returnitem</span>

<span class="k">def</span> <span class="nf">_heapify_max</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transform list into a maxheap, in-place, in O(len(x)) time.&quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">)):</span>
        <span class="n">_siftup_max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

<span class="c1"># &#39;heap&#39; is a heap at all indices &gt;= startpos, except possibly for pos.  pos</span>
<span class="c1"># is the index of a leaf with a possibly out-of-order value.  Restore the</span>
<span class="c1"># heap invariant.</span>
<span class="k">def</span> <span class="nf">_siftdown</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">newitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
    <span class="c1"># Follow the path to the root, moving parents down until finding a place</span>
    <span class="c1"># newitem fits.</span>
    <span class="k">while</span> <span class="n">pos</span> <span class="o">&gt;</span> <span class="n">startpos</span><span class="p">:</span>
        <span class="n">parentpos</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">parentpos</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">newitem</span> <span class="o">&lt;</span> <span class="n">parent</span><span class="p">:</span>
            <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">parentpos</span>
            <span class="k">continue</span>
        <span class="k">break</span>
    <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">newitem</span>

<span class="c1"># The child indices of heap index pos are already heaps, and we want to make</span>
<span class="c1"># a heap at index pos too.  We do this by bubbling the smaller child of</span>
<span class="c1"># pos up (and so on with that child&#39;s children, etc) until hitting a leaf,</span>
<span class="c1"># then using _siftdown to move the oddball originally at index pos into place.</span>
<span class="c1">#</span>
<span class="c1"># We *could* break out of the loop as soon as we find a pos where newitem &lt;=</span>
<span class="c1"># both its children, but turns out that&#39;s not a good idea, and despite that</span>
<span class="c1"># many books write the algorithm that way.  During a heap pop, the last array</span>
<span class="c1"># element is sifted in, and that tends to be large, so that comparing it</span>
<span class="c1"># against values starting from the root usually doesn&#39;t pay (= usually doesn&#39;t</span>
<span class="c1"># get us out of the loop early).  See Knuth, Volume 3, where this is</span>
<span class="c1"># explained and quantified in an exercise.</span>
<span class="c1">#</span>
<span class="c1"># Cutting the # of comparisons is important, since these routines have no</span>
<span class="c1"># way to extract &quot;the priority&quot; from an array element, so that intelligence</span>
<span class="c1"># is likely to be hiding in custom comparison methods, or in array elements</span>
<span class="c1"># storing (priority, record) tuples.  Comparisons are thus potentially</span>
<span class="c1"># expensive.</span>
<span class="c1">#</span>
<span class="c1"># On random arrays of length 1000, making this change cut the number of</span>
<span class="c1"># comparisons made by heapify() a little, and those made by exhaustive</span>
<span class="c1"># heappop() a lot, in accord with theory.  Here are typical results from 3</span>
<span class="c1"># runs (3 just to demonstrate how small the variance is):</span>
<span class="c1">#</span>
<span class="c1"># Compares needed by heapify     Compares needed by 1000 heappops</span>
<span class="c1"># --------------------------     --------------------------------</span>
<span class="c1"># 1837 cut to 1663               14996 cut to 8680</span>
<span class="c1"># 1855 cut to 1659               14966 cut to 8678</span>
<span class="c1"># 1847 cut to 1660               15024 cut to 8703</span>
<span class="c1">#</span>
<span class="c1"># Building the heap by using heappush() 1000 times instead required</span>
<span class="c1"># 2198, 2148, and 2219 compares:  heapify() is more efficient, when</span>
<span class="c1"># you can use it.</span>
<span class="c1">#</span>
<span class="c1"># The total compares needed by list.sort() on the same lists were 8627,</span>
<span class="c1"># 8627, and 8632 (this should be compared to the sum of heapify() and</span>
<span class="c1"># heappop() compares):  list.sort() is (unsurprisingly!) more efficient</span>
<span class="c1"># for sorting.</span>

<span class="k">def</span> <span class="nf">_siftup</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">endpos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span>
    <span class="n">startpos</span> <span class="o">=</span> <span class="n">pos</span>
    <span class="n">newitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
    <span class="c1"># Bubble up the smaller child until hitting a leaf.</span>
    <span class="n">childpos</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>    <span class="c1"># leftmost child position</span>
    <span class="k">while</span> <span class="n">childpos</span> <span class="o">&lt;</span> <span class="n">endpos</span><span class="p">:</span>
        <span class="c1"># Set childpos to index of smaller child.</span>
        <span class="n">rightpos</span> <span class="o">=</span> <span class="n">childpos</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rightpos</span> <span class="o">&lt;</span> <span class="n">endpos</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">heap</span><span class="p">[</span><span class="n">childpos</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">heap</span><span class="p">[</span><span class="n">rightpos</span><span class="p">]:</span>
            <span class="n">childpos</span> <span class="o">=</span> <span class="n">rightpos</span>
        <span class="c1"># Move the smaller child up.</span>
        <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">childpos</span><span class="p">]</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">childpos</span>
        <span class="n">childpos</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="c1"># The leaf at pos is empty now.  Put newitem there, and bubble it up</span>
    <span class="c1"># to its final resting place (by sifting its parents down).</span>
    <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">newitem</span>
    <span class="n">_siftdown</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_siftdown_max</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="s1">&#39;Maxheap variant of _siftdown&#39;</span>
    <span class="n">newitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
    <span class="c1"># Follow the path to the root, moving parents down until finding a place</span>
    <span class="c1"># newitem fits.</span>
    <span class="k">while</span> <span class="n">pos</span> <span class="o">&gt;</span> <span class="n">startpos</span><span class="p">:</span>
        <span class="n">parentpos</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">parentpos</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">parent</span> <span class="o">&lt;</span> <span class="n">newitem</span><span class="p">:</span>
            <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">parentpos</span>
            <span class="k">continue</span>
        <span class="k">break</span>
    <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">newitem</span>

<span class="k">def</span> <span class="nf">_siftup_max</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="s1">&#39;Maxheap variant of _siftup&#39;</span>
    <span class="n">endpos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span>
    <span class="n">startpos</span> <span class="o">=</span> <span class="n">pos</span>
    <span class="n">newitem</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
    <span class="c1"># Bubble up the larger child until hitting a leaf.</span>
    <span class="n">childpos</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>    <span class="c1"># leftmost child position</span>
    <span class="k">while</span> <span class="n">childpos</span> <span class="o">&lt;</span> <span class="n">endpos</span><span class="p">:</span>
        <span class="c1"># Set childpos to index of larger child.</span>
        <span class="n">rightpos</span> <span class="o">=</span> <span class="n">childpos</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rightpos</span> <span class="o">&lt;</span> <span class="n">endpos</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">heap</span><span class="p">[</span><span class="n">rightpos</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">heap</span><span class="p">[</span><span class="n">childpos</span><span class="p">]:</span>
            <span class="n">childpos</span> <span class="o">=</span> <span class="n">rightpos</span>
        <span class="c1"># Move the larger child up.</span>
        <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">childpos</span><span class="p">]</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">childpos</span>
        <span class="n">childpos</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="c1"># The leaf at pos is empty now.  Put newitem there, and bubble it up</span>
    <span class="c1"># to its final resting place (by sifting its parents down).</span>
    <span class="n">heap</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">newitem</span>
    <span class="n">_siftdown_max</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">startpos</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>

<div class="viewcode-block" id="merge"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.merge">[docs]</a><span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="o">*</span><span class="n">iterables</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Merge multiple sorted inputs into a single sorted output.</span>
<span class="sd">    Similar to sorted(itertools.chain(*iterables)) but returns a generator,</span>
<span class="sd">    does not pull the data into memory all at once, and assumes that each of</span>
<span class="sd">    the input streams is already sorted (smallest to largest).</span>
<span class="sd">    &gt;&gt;&gt; list(merge([1,3,5,7], [0,2,4,8], [5,10,15,20], [], [25]))</span>
<span class="sd">    [0, 1, 2, 3, 4, 5, 5, 7, 8, 10, 15, 20, 25]</span>
<span class="sd">    If *key* is not None, applies a key function to each element to determine</span>
<span class="sd">    its sort order.</span>
<span class="sd">    &gt;&gt;&gt; list(merge([&#39;dog&#39;, &#39;horse&#39;], [&#39;cat&#39;, &#39;fish&#39;, &#39;kangaroo&#39;], key=len))</span>
<span class="sd">    [&#39;dog&#39;, &#39;cat&#39;, &#39;fish&#39;, &#39;horse&#39;, &#39;kangaroo&#39;]</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">h</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">h_append</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">append</span>

    <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
        <span class="n">_heapify</span> <span class="o">=</span> <span class="n">_heapify_max</span>
        <span class="n">_heappop</span> <span class="o">=</span> <span class="n">_heappop_max</span>
        <span class="n">_heapreplace</span> <span class="o">=</span> <span class="n">_heapreplace_max</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_heapify</span> <span class="o">=</span> <span class="n">heapify</span>
        <span class="n">_heappop</span> <span class="o">=</span> <span class="n">heappop</span>
        <span class="n">_heapreplace</span> <span class="o">=</span> <span class="n">heapreplace</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">order</span><span class="p">,</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">iter</span><span class="p">,</span> <span class="n">iterables</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">next</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="fm">__next__</span>
                <span class="n">h_append</span><span class="p">([</span><span class="nb">next</span><span class="p">(),</span> <span class="n">order</span> <span class="o">*</span> <span class="n">direction</span><span class="p">,</span> <span class="nb">next</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="n">_heapify</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">value</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="nb">next</span> <span class="o">=</span> <span class="n">s</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">yield</span> <span class="n">value</span>
                    <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">()</span>           <span class="c1"># raises StopIteration when exhausted</span>
                    <span class="n">_heapreplace</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>      <span class="c1"># restore heap condition</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="n">_heappop</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>                 <span class="c1"># remove empty iterator</span>
        <span class="k">if</span> <span class="n">h</span><span class="p">:</span>
            <span class="c1"># fast case when only a single iterator remains</span>
            <span class="n">value</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="nb">next</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">yield</span> <span class="n">value</span>
            <span class="k">yield from</span> <span class="nb">next</span><span class="o">.</span><span class="vm">__self__</span>
        <span class="k">return</span>

    <span class="k">for</span> <span class="n">order</span><span class="p">,</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">iter</span><span class="p">,</span> <span class="n">iterables</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">next</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="fm">__next__</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">()</span>
            <span class="n">h_append</span><span class="p">([</span><span class="n">key</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">order</span> <span class="o">*</span> <span class="n">direction</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="nb">next</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="n">_heapify</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">key_value</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="nb">next</span> <span class="o">=</span> <span class="n">s</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">yield</span> <span class="n">value</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">()</span>
                <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="n">_heapreplace</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="n">_heappop</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">h</span><span class="p">:</span>
        <span class="n">key_value</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="nb">next</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">yield</span> <span class="n">value</span>
        <span class="k">yield from</span> <span class="nb">next</span><span class="o">.</span><span class="vm">__self__</span></div>


<span class="c1"># Algorithm notes for nlargest() and nsmallest()</span>
<span class="c1"># ==============================================</span>
<span class="c1">#</span>
<span class="c1"># Make a single pass over the data while keeping the k most extreme values</span>
<span class="c1"># in a heap.  Memory consumption is limited to keeping k values in a list.</span>
<span class="c1">#</span>
<span class="c1"># Measured performance for random inputs:</span>
<span class="c1">#</span>
<span class="c1">#                                   number of comparisons</span>
<span class="c1">#    n inputs     k-extreme values  (average of 5 trials)   % more than min()</span>
<span class="c1"># -------------   ----------------  ---------------------   -----------------</span>
<span class="c1">#      1,000           100                  3,317               231.7%</span>
<span class="c1">#     10,000           100                 14,046                40.5%</span>
<span class="c1">#    100,000           100                105,749                 5.7%</span>
<span class="c1">#  1,000,000           100              1,007,751                 0.8%</span>
<span class="c1"># 10,000,000           100             10,009,401                 0.1%</span>
<span class="c1">#</span>
<span class="c1"># Theoretical number of comparisons for k smallest of n random inputs:</span>
<span class="c1">#</span>
<span class="c1"># Step   Comparisons                  Action</span>
<span class="c1"># ----   --------------------------   ---------------------------</span>
<span class="c1">#  1     1.66 * k                     heapify the first k-inputs</span>
<span class="c1">#  2     n - k                        compare remaining elements to top of heap</span>
<span class="c1">#  3     k * (1 + lg2(k)) * ln(n/k)   replace the topmost value on the heap</span>
<span class="c1">#  4     k * lg2(k) - (k/2)           final sort of the k most extreme values</span>
<span class="c1">#</span>
<span class="c1"># Combining and simplifying for a rough estimate gives:</span>
<span class="c1">#</span>
<span class="c1">#        comparisons = n + k * (log(k, 2) * log(n/k) + log(k, 2) + log(n/k))</span>
<span class="c1">#</span>
<span class="c1"># Computing the number of comparisons for step 3:</span>
<span class="c1"># -----------------------------------------------</span>
<span class="c1"># * For the i-th new value from the iterable, the probability of being in the</span>
<span class="c1">#   k most extreme values is k/i.  For example, the probability of the 101st</span>
<span class="c1">#   value seen being in the 100 most extreme values is 100/101.</span>
<span class="c1"># * If the value is a new extreme value, the cost of inserting it into the</span>
<span class="c1">#   heap is 1 + log(k, 2).</span>
<span class="c1"># * The probability times the cost gives:</span>
<span class="c1">#            (k/i) * (1 + log(k, 2))</span>
<span class="c1"># * Summing across the remaining n-k elements gives:</span>
<span class="c1">#            sum((k/i) * (1 + log(k, 2)) for i in range(k+1, n+1))</span>
<span class="c1"># * This reduces to:</span>
<span class="c1">#            (H(n) - H(k)) * k * (1 + log(k, 2))</span>
<span class="c1"># * Where H(n) is the n-th harmonic number estimated by:</span>
<span class="c1">#            gamma = 0.5772156649</span>
<span class="c1">#            H(n) = log(n, e) + gamma + 1 / (2 * n)</span>
<span class="c1">#   http://en.wikipedia.org/wiki/Harmonic_series_(mathematics)#Rate_of_divergence</span>
<span class="c1"># * Substituting the H(n) formula:</span>
<span class="c1">#            comparisons = k * (1 + log(k, 2)) * (log(n/k, e) + (1/n - 1/k) / 2)</span>
<span class="c1">#</span>
<span class="c1"># Worst-case for step 3:</span>
<span class="c1"># ----------------------</span>
<span class="c1"># In the worst case, the input data is reversed sorted so that every new element</span>
<span class="c1"># must be inserted in the heap:</span>
<span class="c1">#</span>
<span class="c1">#             comparisons = 1.66 * k + log(k, 2) * (n - k)</span>
<span class="c1">#</span>
<span class="c1"># Alternative Algorithms</span>
<span class="c1"># ----------------------</span>
<span class="c1"># Other algorithms were not used because they:</span>
<span class="c1"># 1) Took much more auxiliary memory,</span>
<span class="c1"># 2) Made multiple passes over the data.</span>
<span class="c1"># 3) Made more comparisons in common cases (small k, large n, semi-random input).</span>
<span class="c1"># See the more detailed comparison of approach at:</span>
<span class="c1"># http://code.activestate.com/recipes/577573-compare-algorithms-for-heapqsmallest</span>

<div class="viewcode-block" id="nsmallest"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.nsmallest">[docs]</a><span class="k">def</span> <span class="nf">nsmallest</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find the n smallest elements in a dataset.</span>
<span class="sd">    Equivalent to:  sorted(iterable, key=key)[:n]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Short-cut for n==1 is to use min()</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="n">sentinel</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">sentinel</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="n">sentinel</span> <span class="k">else</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>

    <span class="c1"># When n&gt;=size, it&#39;s faster to use sorted()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>

    <span class="c1"># When key is none, use simpler decoration</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="c1"># put the range(n) first so that zip() doesn&#39;t</span>
        <span class="c1"># consume one too many elements from the iterator</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">elem</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">it</span><span class="p">)]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="n">_heapify_max</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">top</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">n</span>
        <span class="n">_heapreplace</span> <span class="o">=</span> <span class="n">_heapreplace_max</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">elem</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">_heapreplace</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">order</span><span class="p">))</span>
                <span class="n">top</span><span class="p">,</span> <span class="n">_order</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">order</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">elem</span> <span class="k">for</span> <span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>

    <span class="c1"># General case, slowest method</span>
    <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">key</span><span class="p">(</span><span class="n">elem</span><span class="p">),</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">it</span><span class="p">)]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="n">_heapify_max</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">top</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">n</span>
    <span class="n">_heapreplace</span> <span class="o">=</span> <span class="n">_heapreplace_max</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">key</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="n">_heapreplace</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">elem</span><span class="p">))</span>
            <span class="n">top</span><span class="p">,</span> <span class="n">_order</span><span class="p">,</span> <span class="n">_elem</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">order</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">elem</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span></div>

<div class="viewcode-block" id="nlargest"><a class="viewcode-back" href="../parts/reference/data-structures/python/docs/heap.html#heapq_py.nlargest">[docs]</a><span class="k">def</span> <span class="nf">nlargest</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find the n largest elements in a dataset.</span>
<span class="sd">    Equivalent to:  sorted(iterable, key=key, reverse=True)[:n]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Short-cut for n==1 is to use max()</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="n">sentinel</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">sentinel</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="n">sentinel</span> <span class="k">else</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>

    <span class="c1"># When n&gt;=size, it&#39;s faster to use sorted()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>

    <span class="c1"># When key is none, use simpler decoration</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">elem</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">it</span><span class="p">)]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="n">heapify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">top</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="o">-</span><span class="n">n</span>
        <span class="n">_heapreplace</span> <span class="o">=</span> <span class="n">heapreplace</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="o">&lt;</span> <span class="n">elem</span><span class="p">:</span>
                <span class="n">_heapreplace</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">order</span><span class="p">))</span>
                <span class="n">top</span><span class="p">,</span> <span class="n">_order</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">order</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">elem</span> <span class="k">for</span> <span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>

    <span class="c1"># General case, slowest method</span>
    <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[(</span><span class="n">key</span><span class="p">(</span><span class="n">elem</span><span class="p">),</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">it</span><span class="p">)]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="n">heapify</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="n">top</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">order</span> <span class="o">=</span> <span class="o">-</span><span class="n">n</span>
    <span class="n">_heapreplace</span> <span class="o">=</span> <span class="n">heapreplace</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">key</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">top</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">:</span>
            <span class="n">_heapreplace</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">elem</span><span class="p">))</span>
            <span class="n">top</span><span class="p">,</span> <span class="n">_order</span><span class="p">,</span> <span class="n">_elem</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">order</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">elem</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span></div>

<span class="c1"># If available, use C implementation</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">_heapq</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">_heapq</span> <span class="kn">import</span> <span class="n">_heapreplace_max</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">_heapq</span> <span class="kn">import</span> <span class="n">_heapify_max</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">_heapq</span> <span class="kn">import</span> <span class="n">_heappop_max</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="kn">import</span> <span class="nn">doctest</span> <span class="c1"># pragma: no cover</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">())</span> <span class="c1"># pragma: no cover</span>
</pre></div>
<div class="section">
   
</div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Justin Napolitano<br/>
    
        &copy; Copyright 2022, Justin Napolitano.<br/>
      Last updated on Mar 04, 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>